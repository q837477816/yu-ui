(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{219:function(e,t,r){},227:function(e,t,r){"use strict";r(54),r(14),r(26);var n=void 0,i=function(e,t,r){n.$children.forEach(function(n){n.$options.name===e?n.$emit.apply(n,[t].concat(r)):i.apply(n,[e,t].concat([r]))})};t.a={methods:{dispatch:function(e,t,r){for(var n=this.$parent||this.$root,i=n.$options.name;n&&(!i||i!==e);)(n=n.$parent)&&(i=n.$options.name);n&&n.$emit.apply(n,[t].concat(r))},broadcast:function(e,t,r){i.call(this,e,t,r)}}}},237:function(e,t,r){},238:function(e,t,r){"use strict";var n=r(219);r.n(n).a},240:function(e,t,r){},264:function(e,t,r){"use strict";var n=r(208),i=r(227),o={name:"YuInput",components:{YuIcon:n.a},mixins:[i.a],props:{value:{type:[String,Date],required:!0},placeholder:{type:String,required:!1,default:void 0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:String,required:!1,default:void 0}},methods:{handleInput:function(e){this.$emit("input",e.target.value,e),this.dispatch("YuFormItem","on-form-change",e.target.value)},handleBlur:function(e){this.$emit("blur",e.target.value,e),this.dispatch("YuFormItem","on-form-blur",e.target.value)}}},a=(r(238),r(1)),s=Object(a.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper",class:{error:e.error}},[r("input",{attrs:{type:"text",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly},domProps:{value:e.value},on:{change:function(t){return e.$emit("change",t.target.value,t)},input:e.handleInput,focus:function(t){return e.$emit("focus",t.target.value,t)},blur:e.handleBlur}}),e._v(" "),e.error?[r("yu-icon",{staticClass:"icon-error",attrs:{name:"error"}}),e._v(" "),r("span",{staticClass:"errorMessage"},[e._v(e._s(e.error))])]:e._e()],2)},[],!1,null,"75c49be5",null);t.a=s.exports},275:function(e,t,r){"use strict";var n=r(237);r.n(n).a},277:function(e,t,r){"use strict";var n=r(240);r.n(n).a},310:function(e,t,r){"use strict";r.r(t);r(25),r(96),r(14),r(26),r(55);var n={name:"YuForm",props:{model:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}}},provide:function(){return{form:this}},data:function(){return{formItems:[]}},created:function(){var e=this;this.$on("on-form-item-add",function(t){t&&e.formItems.push(t)}),this.$on("on-form-item-remove",function(t){if(t.prop){var r=e.formItems.indexOf(t);e.formItems.splice(r,1)}})},methods:{resetFields:function(){this.formItems.forEach(function(e){e.resetField()})},validate:function(e){var t=this;return new Promise(function(r){var n=!0,i=0;t.formItems.forEach(function(o){o.validate("",function(o){o&&(n=!1),++i===t.formItems.length&&(r(n),"function"==typeof e&&e(n))})})})}}},i=r(1),o=Object(i.a)(n,function(){var e=this.$createElement;return(this._self._c||e)("form",{staticClass:"yu-form"},[this._t("default")],2)},[],!1,null,null,null).exports,a=r(273),s=(r(203),r(204),r(32),r(22),r(227)),u=r(274),l={name:"YuFormItem",mixins:[s.a],props:{label:{type:String,default:""},prop:{type:String,default:void 0}},inject:["form"],data:function(){return{isRequired:!1,validateState:"",errorMessage:""}},computed:{fieldValue:function(){return this.form.model[this.prop]}},mounted:function(){this.prop&&(this.dispatch("YuForm","on-form-item-add",this),this.initialValue=this.fieldValue,this.setRules())},beforeDestroy:function(){this.prop&&this.dispatch("YuForm","on-form-item-remove",this)},methods:{setRules:function(){var e=this.getRules();this.isRequired=e.some(function(e){return e.required}),this.$on("on-form-blur",this.onFieldBlur),this.$on("on-form-change",this.onFieldChange)},getRules:function(){var e=this.form.rules?this.form.rules[this.prop]:[];return[].concat(e||[])},getFilteredRule:function(e){var t=this.getRules();return e?t.filter(function(t){return t.trigger&&t.trigger.includes(e)}):t},validate:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.getFilteredRule(e);if(!n||!n.length)return this.validateState="success",this.errorMessage="",r(this.errorMessage);this.validateState="validating";var i=Object(a.a)({},this.prop,n),o=new u.a(i),s=Object(a.a)({},this.prop,this.fieldValue);o.validate(s,{firstFields:!0},function(e){t.validateState=e?"error":"success",t.errorMessage=e?e[0].message:"",r(t.errorMessage)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validate("change")},resetField:function(){this.validateState="",this.errorMessage="",this.form.model[this.prop]=this.initialValue}}},m=(r(275),Object(i.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"yu-form-item"},[e.label?r("label",{class:["yu-form-item-label",{"is-required":e.isRequired}]},[e._v(e._s(e.label))]):e._e(),e._v(" "),r("div",[e._t("default"),e._v(" "),"error"===e.validateState?r("div",{staticClass:"yu-form-item-error-message"},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]):e._e()],2)])},[],!1,null,"9ec66b8e",null).exports),f=r(264),c=r(214),d=r(265);r(0).a.use(d.a);var p={name:"YuFormDemos",components:{YuForm:o,YuFormItem:m,YuInput:f.a,YuButton:c.a},data:function(){return{form:{username:"Paul",email:"paul@xxx.com",phone:"111"},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},usage:'\n                <yu-form ref="form" :model="form" :rules="rules">\n                    <yu-form-item label="用户名" prop="username">\n                        <yu-input v-model="form.username"></yu-input>\n                    </yu-form-item>\n                    <yu-form-item label="邮箱" prop="email">\n                        <yu-input v-model="form.email"></yu-input>\n                    </yu-form-item>\n                    <yu-form-item label="手机" prop="phone">\n                        <yu-input v-model="form.phone"></yu-input>\n                    </yu-form-item>\n                </yu-form>\n\n                <yu-button @click="resetForm">重置表单</yu-button>\n                <yu-button @click="validateForm1">校验表单(回调)</yu-button>\n                <yu-button @click="validateForm2">校验表单(Promise)</yu-button>\n\n                data() {\n                    return {\n                        form: {\n                            username: \'Paul\',\n                            email: \'paul@xxx.com\'\n                        },\n                        rules: {\n                            username: [\n                                {required: true, message: \'用户名不能为空\', trigger: \'blur\'}\n                            ],\n                            email: [\n                                {required: true, message: \'邮箱不能为空\', trigger: \'blur\'},\n                                {type: \'email\', message: \'邮箱格式不正确\', trigger: \'blur\'}\n                            ]\n                        }\n                    }\n                },\n                methods: {\n                    resetForm() {\n                        this.$refs.form.resetFields()\n                    },\n                    validateForm1() {\n                        this.$refs.form.validate((valid) => {\n                            if (valid) {\n                                this.$toast(\'校验成功\')\n                            } else {\n                                this.$toast(\'校验失败\')\n                            }\n                        })\n                    },\n                    validateForm2() {\n                        this.$refs.form.validate().then(valid => {\n                            if (valid) {\n                                this.$toast(\'校验成功\')\n                            } else {\n                                this.$toast(\'校验失败\')\n                            }\n                        })\n                    }\n                }\n            '.replace(/^ {16}/gm,"").trim()}},methods:{resetForm:function(){this.$refs.form.resetFields()},validateForm1:function(){var e=this;this.$refs.form.validate(function(t){t?e.$toast("校验成功"):e.$toast("校验失败")})},validateForm2:function(){var e=this;this.$refs.form.validate().then(function(t){t?e.$toast("校验成功"):e.$toast("校验失败")})}}},h=(r(277),Object(i.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("p",[e._v("完整用法")]),e._v(" "),r("yu-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("yu-form-item",{attrs:{label:"用户名",prop:"username"}},[r("yu-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("yu-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("yu-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),r("yu-form-item",{attrs:{label:"手机",prop:"phone"}},[r("yu-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),r("yu-button",{on:{click:e.resetForm}},[e._v("重置表单")]),e._v(" "),r("yu-button",{on:{click:e.validateForm1}},[e._v("校验表单(回调)")]),e._v(" "),r("yu-button",{on:{click:e.validateForm2}},[e._v("校验表单(Promise)")]),e._v(" "),r("pre",[r("code",[e._v(e._s(e.usage))])])],1)])},[],!1,null,"480aa1b9",null));t.default=h.exports}}]);